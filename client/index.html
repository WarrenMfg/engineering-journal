<!DOCTYPE html>
<html>

<head>
  <script src="assets/js/purify.min.js"></script>
  <script>
    // initialize for this page
    DOMPurify.setConfig({ ALLOWED_TAGS: [] });

    if (!localStorage.getItem('password')) {
      const password = DOMPurify.sanitize((prompt('Enter password') || '').trim());
      if (!password) {
        window.location.replace('about:blank');
      } else {
        localStorage.setItem('password', password);
      }
    }

    localStorage.removeItem('topic');
  </script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
  <title>Engineering Journal</title>
  <meta property="og:title" content="Engineering Journal">
  <meta property="og:type" content="website">
  <meta property="og:image" content="assets/img/eat-sleep-code-repeat.png">
  <meta property="og:description" content="Resource reference tables for HTML, CSS, JavaScript, and the MERN stack: MongoDB, Express, React, and Node.">
  <meta name="description" content="Resource reference tables for HTML, CSS, JavaScript, and the MERN stack: MongoDB, Express, React, and Node.">
  <meta name="twitter:title" content="Engineering Journal">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:image" content="assets/img/eat-sleep-code-repeat.png">
  <meta name="twitter:description" content="Resource reference tables for HTML, CSS, JavaScript, and the MERN stack: MongoDB, Express, React, and Node.">
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/css/Navigation-Clean.css">
  <link rel="stylesheet" href="assets/css/styles.css">
</head>

<body onload="searchModal()">
  <!-- Masking DIV -->
  <div id="mask" style='display: block; background-color: rgba(255,255,255,1);'></div>
  <!-- Start: Navbar -->
  <nav class="navbar navbar-light navbar-expand-md navigation-clean">
    <div class="container"><a class="navbar-brand" href="index.html">Engineering Journal</a><button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
      <div class="collapse navbar-collapse text-right"
        id="navcol-1">
        <ul class="nav navbar-nav ml-auto">
          <li class="nav-item" role="presentation"><a class="nav-link active" href="index.html">Home</a></li>
          <li class="nav-item" role="presentation"><a class="nav-link" href="javascript:void(0)" id="search">Search</a></li>
          <li class="nav-item dropdown"><a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false" href="#">Topics&nbsp;</a>
            <div class="dropdown-menu mb-2" role="menu"><a class="dropdown-item text-success font-weight-bold" id="add-topic" role="presentation" href="javascript:void(0)">Add</a>
            </div>
          </li>
          <div class="form-inline ml-auto">
            <div class="form-group">
              <input class="form-control search-field" type="search" id="update-password" name="updatePassword" placeholder="Update password" />
              <input class="form-control search-field" type="search" id="new-topic-name" name="newTopicName" placeholder="Topic name" />
            </div>
        </ul>
      </div>
    </div>
  </nav>
  <!-- End: Navbar -->
  <!-- Start: Error Feedback -->
  <div id="error-feedback">
    <div id="error-feedback-flex"></div>
  </div>
  <!-- End: Error Feedback -->

  <main>
    <div class="container">
      <div class="row page-title">
        <div class="col text-center">
          <h1 class="page-title">Engineering Journal</h1>
          <p>Resource reference tables for HTML, CSS, JavaScript, and the MERN stack: MongoDB, Express, React, and Node.</p>
        </div>
      </div>
      <div class="row d-lg-flex image">
        <div class="col d-flex d-md-flex d-lg-flex justify-content-center align-items-center justify-content-sm-center justify-content-md-center align-items-md-center justify-content-lg-center align-items-lg-center justify-content-xl-center align-items-xl-center"><img class="rounded img-fluid d-block" src="assets/img/eat-sleep-code-repeat.png" width="500px" height="500px" style="width: 50vw;height: 50vw;max-width: 500px;max-height: 500px;"></div>
      </div>
    </div>
  </main>
  <!-- Start: Search Modal -->
  <div class="modal fade search" role="dialog" tabindex="-1">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Search</h4><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
        </div>
        <div class="modal-body">
          <form>
            <div class="justify-content-center align-items-center">
              <div class="form-group flex-grow-1 flex-sm-grow-1 flex-md-grow-1 flex-lg-grow-1 flex-xl-grow-1"><label for="modal-search">Search</label><input class="form-control" type="text" id="modal-search" name="modal-search" placeholder="Term or phrase"></div>
              <div class="form-group flex-grow-1"><label for="modal-site">Site</label><input class="form-control" type="text" id="modal-site" name="modal-site" placeholder="mongodb.github.io"></div>

              <div class="d-flex justify-content-center mt-3 mb-3 radios">
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="site" id="mozilla" value="developer.mozilla.org">
                  <label class="form-check-label pl-0" for="mozilla">MDN</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="site" id="w3schools" value="w3schools.com">
                  <label class="form-check-label pl-0" for="w3schools">W3S</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="site" id="jquery" value="jquery.com">
                  <label class="form-check-label pl-0" for="jquery">jQ</label>
                </div>
                <div class="form-check form-check-inline">
                  <input class="form-check-input" type="radio" name="site" id="nodejs" value="nodejs.org">
                  <label class="form-check-label pl-0" for="nodejs">Node</label>
                </div>
              </div>

            </div><button class="btn btn-primary" type="submit">Submit</button>
          </form>
        </div>
        <div class="modal-footer"><button class="btn btn-danger" type="button">Cancel</button></div>
      </div>
    </div>
  </div>
  <!-- End: Search Modal -->
  <footer class="text-center">
    <p>&copy; 2020 Kenneth Warren</p>
  </footer>
  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/bootstrap/js/bootstrap.min.js"></script>
  <script src="assets/js/utils.js"></script>
  <script src="assets/js/updatePassword.js"></script>
  <script src="assets/js/search.js"></script>
  <script src="assets/js/topics.js"></script>
  <script>
    // get collections for dropdown menu
    // AJAX
    $.ajax({
      url: `${API_URL}/api/collections/${DOMPurify.sanitize(localStorage.getItem('password').trim())}`,
      type: 'GET',
      dataType: 'json',
      success: data => {
        // handle error if no namespaces
        if (!data.namespaces.length) return handleErrors('Sorry, an error has occurred.');

        // remove inline styles to toggle progress cursor and masking div off
        $('#mask').attr('style', null);

        // update dropdown menu with all collections
        populateDropdownMenu(data.namespaces, $('h1.page-title').text());
      },
      error: (xhr, errorType, exception) => {
        // log error
        console.log('Namespace error:', xhr, errorType, exception);

        // remove local storage
        localStorage.removeItem('password');

        // refresh
        location.reload();
      }
    });
  </script>
</body>

</html>